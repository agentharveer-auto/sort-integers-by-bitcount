<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Sort Integers by Bitcount</title>
</head>
<body>
  <h1>Sort Integers by Number of 1 Bits</h1>
  <p>Enter numbers separated by commas (e.g., 0,1,2,3,4):</p>
  <input id="numbers" style="width: 420px" placeholder="0,1,2,3,4" />
  <button id="sortBtn">Sort</button>
  <h3>Output</h3>
  <pre id="output"></pre>
  <script>
    async function sortViaREST(nums){
      const resp = await fetch('/sort', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ numbers: nums })
      });
      if(!resp.ok) throw new Error('Request failed with status ' + resp.status);
      const data = await resp.json();
      return data.sorted_numbers;
    }

    document.getElementById('sortBtn').addEventListener('click', async () => {
      const raw = document.getElementById('numbers').value;
      if(!raw.trim()) { document.getElementById('output').textContent = 'Please enter numbers.'; return; }
      const tokens = raw.split(',').map(t => t.trim()).filter(t => t.length > 0);
      const nums = tokens.map(t => Number(t));
      if(nums.some(n => !Number.isFinite(n) || !Number.isInteger(n)){
        document.getElementById('output').textContent = 'All tokens must be integers.';
        return;
      }
      try {
        const sorted = await sortViaREST(nums);
        document.getElementById('output').textContent = sorted.join(', ');
      } catch (e) {
        document.getElementById('output').textContent = 'Error: ' + e.message;
      }
    });
  </script>
</body>
</html>
